project:
  name: remember-core
  version: 0.10.0
  started: 2026-02-27
  status: in_progress
  current_milestone: M3
  description: |
    Core SDK for Remember MCP and REST services.
    Extracts transport-agnostic business logic from remember-mcp so both
    remember-mcp-server and remember-rest-server can consume shared services.

milestones:
  - id: M1
    name: Types & Models
    status: in_progress
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 1
    tasks_completed: 3
    tasks_total: 3
    notes: |
      Port all type definitions, interfaces, and constants from remember-mcp.

  - id: M2
    name: Database & Configuration
    status: completed
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 1
    tasks_completed: 4
    tasks_total: 4
    notes: |
      Port Weaviate/Firestore init, schema, config, and utilities.

  - id: M3
    name: Core Services
    status: in_progress
    progress: 75
    started: 2026-02-27
    completed: null
    estimated_weeks: 2
    tasks_completed: 3
    tasks_total: 4
    notes: |
      Extract business logic from 20 MCP tool handlers into reusable services.

  - id: M4
    name: Integration & Packaging
    status: not_started
    progress: 0
    started: null
    completed: null
    estimated_weeks: 1
    tasks_completed: 0
    tasks_total: 4
    notes: |
      NPM packaging, public API design, integration tests, migration guides.

tasks:
  milestone_1:
    - id: task-1
      name: Port Core Memory Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-1-core-memory-types.md
      estimated_hours: 3
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        Memory, Relationship, MemoryContext, SearchFilters, SearchOptions, SearchResult, Auth types (GroupPermissions, AuthContext, CredentialsProvider)
    - id: task-2
      name: Port Preferences and Space Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-2-preferences-space-types.md
      estimated_hours: 2
      actual_hours: 0.05
      completed_date: 2026-02-27
      notes: |
        6 preference categories, SpaceMemory, published memory types
    - id: task-3
      name: Port Constants and LLM Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-3-constants-llm-types.md
      estimated_hours: 2
      actual_hours: 0.05
      completed_date: 2026-02-27
      notes: |
        41 content types, LLM types, shared enums

  milestone_2:
    - id: task-4
      name: Port Weaviate Client and Schema
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-4-weaviate-client-schema.md
      estimated_hours: 4
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        client.ts, schema.ts, space-schema.ts, v2-collections.ts, index.ts barrel exports.
        Design: WeaviateConfig param instead of importing from config module (not yet ported).
    - id: task-5
      name: Port Firestore Initialization and Paths
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-5-firestore-initialization.md
      estimated_hours: 2
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        init.ts (FirestoreConfig param pattern, re-exports SDK helpers), paths.ts (env-based prefixes),
        index.ts barrel. Design: FirestoreConfig + FirestoreLogger params, same pattern as WeaviateConfig.
    - id: task-6
      name: Port Configuration Management
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-6-configuration-management.md
      estimated_hours: 2
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        environment.ts (loadRememberConfig, validateRememberConfig), debug.ts (DebugLevel enum, parseDebugLevel, createDebugConfig),
        index.ts updated. Scaffold schema.ts/loader.ts commented out (needs zod).
    - id: task-7
      name: Port Utility Modules
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-7-utility-modules.md
      estimated_hours: 3
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        logger.ts (createLogger factory), error-handler.ts (formatDetailedError, handleToolError, withErrorHandling),
        filters.ts (Weaviate v3 filter builders), auth-helpers.ts (canModerate, canModerateAny),
        debug.ts (DebugLogger class), test-data-generator.ts (moved to testing/).

  milestone_3:
    - id: task-8
      name: Port Collection Utilities and Existing Services
      status: completed
      file: agent/tasks/milestone-3-core-services/task-8-collection-utils-existing-services.md
      estimated_hours: 5
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        Collections: composite-ids.ts, tracking-arrays.ts, dot-notation.ts, index.ts.
        Services: preferences.service.ts, confirmation-token.service.ts, credentials-provider.ts, space-config.service.ts.
        All use DI pattern (accept Logger param). Updated services/index.ts barrel.
    - id: task-9
      name: Create MemoryService
      status: completed
      file: agent/tasks/milestone-3-core-services/task-9-memory-service.md
      estimated_hours: 8
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        MemoryService class: create(), search() (hybrid), findSimilar() (vector),
        query() (semantic/nearText), update() (partial, replace), delete() (soft).
        All 6 operations extracted from MCP tool handlers. No MCP-specific code.
    - id: task-10
      name: Create RelationshipService and SpaceService
      status: completed
      file: agent/tasks/milestone-3-core-services/task-10-relationship-space-services.md
      estimated_hours: 8
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        RelationshipService: 4 CRUD+search operations (create, update, search, delete).
        SpaceService: 8 operations (publish, retract, revise, confirm, deny, moderate, search, query).
        Two-phase confirmation flow, composite IDs, tracking arrays, moderation, revision history.
    - id: task-11
      name: Service Tests and Validation
      status: not_started
      file: agent/tasks/milestone-3-core-services/task-11-service-tests.md
      estimated_hours: 6
      completed_date: null
      notes: |
        Unit tests for all services, integration test scaffold

  milestone_4:
    - id: task-12
      name: NPM Package Setup
      status: not_started
      file: agent/tasks/milestone-4-integration-and-packaging/task-12-npm-package-setup.md
      estimated_hours: 4
      completed_date: null
      notes: |
        package.json, tsconfig, esbuild, exports map
    - id: task-13
      name: Public API Design and Barrel Exports
      status: not_started
      file: agent/tasks/milestone-4-integration-and-packaging/task-13-public-api-exports.md
      estimated_hours: 3
      completed_date: null
      notes: |
        src/index.ts, subpath exports, no leaky abstractions
    - id: task-14
      name: Integration Tests
      status: not_started
      file: agent/tasks/milestone-4-integration-and-packaging/task-14-integration-tests.md
      estimated_hours: 5
      completed_date: null
      notes: |
        End-to-end service flows against real/emulated DBs
    - id: task-15
      name: Migration Guide and Consumer Documentation
      status: not_started
      file: agent/tasks/milestone-4-integration-and-packaging/task-15-migration-guide.md
      estimated_hours: 4
      completed_date: null
      notes: |
        remember-mcp migration, REST server bootstrap guide

documentation:
  design_documents: 1
  milestone_documents: 4
  pattern_documents: 25
  task_documents: 15

progress:
  planning: 100
  implementation: 60
  overall: 60

recent_work:
  - date: 2026-02-27
    description: |
      Task 10 — Create RelationshipService and SpaceService
    items:
      - "Created src/services/relationship.service.ts — 4 CRUD+search operations"
      - "create(): validate memory IDs, insert relationship doc, bidirectional references"
      - "update(): partial updates (relationship_type, observation, strength, confidence, tags)"
      - "search(): hybrid search filtered to doc_type='relationship' with type/strength/confidence filters"
      - "delete(): remove relationship doc and clean up memory references"
      - "Created src/services/space.service.ts — 8 operations"
      - "publish(): phase 1 confirmation token for multi-space/group publish"
      - "retract(): phase 1 confirmation token for selective retraction"
      - "revise(): phase 1 confirmation token for content sync to published copies"
      - "confirm(): phase 2 executor (publish/retract/revise), composite IDs, tracking arrays"
      - "deny(): cancel pending action via ConfirmationTokenService"
      - "moderate(): approve/reject/remove published memories (requires group permissions)"
      - "search(): multi-source search across spaces+groups with deduplication"
      - "query(): semantic nearText on public spaces collection"
      - "Helper exports: buildModerationFilter, parseRevisionHistory, buildRevisionHistory"
      - "Updated src/services/index.ts barrel exports"
      - "M3 Core Services: 75% (3/4 tasks)"
  - date: 2026-02-27
    description: |
      Task 5 — Port Firestore Initialization and Paths
    items:
      - "Created src/database/firestore/init.ts — Firebase Admin SDK init with FirestoreConfig param pattern"
      - "Created src/database/firestore/paths.ts — env-based collection path helpers (user-scoped, cross-user, global)"
      - "Created src/database/firestore/index.ts — barrel exports"
      - "Installed @prmichaelsen/firebase-admin-sdk-v8 dependency"
      - "Re-exports: getDocument, setDocument, addDocument, updateDocument, deleteDocument, queryDocuments, batchWrite, FieldValue, verifyIdToken"
      - "Zero compilation errors"
  - date: 2026-02-27
    description: |
      Task 6 — Port Configuration Management
    items:
      - "Created src/config/environment.ts — loadRememberConfig(), validateRememberConfig(), typed interfaces"
      - "Created src/config/debug.ts — DebugLevel enum (NONE-TRACE), parseDebugLevel(), createDebugConfig()"
      - "Updated src/config/index.ts — barrel exports for new modules, scaffold commented out (needs zod)"
      - "Zero compilation errors in new files"
  - date: 2026-02-27
    description: |
      Task 7 — Port Utility Modules (M2 COMPLETE)
    items:
      - "Created src/utils/logger.ts — createLogger() factory with LogLevel, structured JSON output"
      - "Created src/utils/error-handler.ts — formatDetailedError, handleToolError, withErrorHandling"
      - "Created src/utils/filters.ts — Weaviate v3 filter builders (combined, memory-only, relationship-only, deleted)"
      - "Created src/utils/auth-helpers.ts — canModerate(), canModerateAny()"
      - "Created src/utils/debug.ts — DebugLogger class with trace/debug/info/warn/error/dump/time"
      - "Created src/testing/test-data-generator.ts — synthetic memory generation, benchmarking utils"
      - "Created src/utils/index.ts — barrel exports"
      - "M2 Database & Configuration milestone 100% complete (4/4 tasks)"
  - date: 2026-02-27
    description: |
      Task 8 — Port Collection Utilities and Existing Services (M3 begins)
    items:
      - "Created src/collections/ — composite-ids.ts, tracking-arrays.ts, dot-notation.ts, index.ts"
      - "Created src/services/preferences.service.ts — PreferencesDatabaseService (Firestore-backed)"
      - "Created src/services/confirmation-token.service.ts — ConfirmationTokenService (5-min expiry)"
      - "Created src/services/credentials-provider.ts — StubCredentialsProvider, factory, singleton"
      - "Created src/services/space-config.service.ts — getSpaceConfig, setSpaceConfig, DEFAULT_SPACE_CONFIG"
      - "Updated src/services/index.ts barrel exports"
      - "M2 marked complete, M3 started at 25%"
  - date: 2026-02-27
    description: |
      Task 9 — Create MemoryService
    items:
      - "Created src/services/memory.service.ts — unified MemoryService with 6 operations"
      - "create(): insert memory with validated content type, scoring, tracking arrays"
      - "search(): hybrid (semantic+keyword) search with alpha, filters, deleted filter"
      - "findSimilar(): vector similarity via nearObject/nearText with distance threshold"
      - "query(): semantic nearText search for RAG retrieval"
      - "update(): partial updates via replace() (Weaviate bug workaround), version increment"
      - "delete(): soft delete (deleted_at/deleted_by/deletion_reason), finds orphaned relationships"
      - "Updated services/index.ts with MemoryService exports"
      - "M3 Core Services: 50% (2/4 tasks)"
  - date: 2026-02-27
    description: |
      @acp.sync - Synchronized documentation with actual remember-mcp codebase.
    items:
      - "Fixed tool count: 22 → 20 (actual tool handlers in src/tools/)"
      - "Fixed content type count: 45+ → 41 (exact count from CONTENT_TYPES array)"
      - "Added missing auth.ts types to Task 1 (GroupPermissions, AuthContext, etc.)"
      - "Added missing credentials-provider.ts and space-config.service.ts to Task 8"
      - "Added missing auth-helpers.ts to Task 7"
      - "Added moderate.ts tool handler to Task 10 SpaceService"
      - "Fixed tool paths: tools/ → src/tools/ in Tasks 9, 10"
      - "Noted LLM types file is empty placeholder in Task 3"
      - "Updated all milestone docs and progress.yaml with corrected numbers"
  - date: 2026-02-27
    description: |
      Complete project planning - milestones, tasks, and progress tracking.
    items:
      - "Created 15 task documents from ACP template across 4 milestones"
      - "Updated progress.yaml with all task entries"
      - "Planning phase complete"
  - date: 2026-02-27
    description: |
      Project initialization, ACP setup, core-sdk package install, milestone planning.
    items:
      - "Initialized remember-core project with ACP"
      - "Installed core-sdk package (v1.22.0) with 25 patterns and source scaffolding"
      - "Updated ACP from v4.2.1 to v4.3.0"
      - "Created 4 milestone documents from template"
      - "Researched remember-mcp codebase for extraction planning"

next_steps:
  - M3 Task 11 - Service Tests and Validation
  - M4 Task 12 - NPM Package Setup
  - M4 Task 13 - Public API Design and Barrel Exports

notes:
  - "Source: remember-mcp v3.8.0 (prmichaelsen/remember-mcp)"
  - "Consumer: remember-mcp-server (prmichaelsen/remember-mcp-server)"
  - "Future consumer: remember-rest-server"
  - "20 MCP tools map to 5 core services + 2 existing services port directly"

current_blockers: []
