project:
  name: remember-core
  version: 0.12.0
  started: 2026-02-27
  status: in_progress
  current_milestone: M7
  description: |
    Core SDK for Remember MCP and REST services.
    Extracts transport-agnostic business logic from remember-mcp so both
    remember-mcp-server and remember-rest-server can consume shared services.

milestones:
  - id: M1
    name: Types & Models
    status: in_progress
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 1
    tasks_completed: 3
    tasks_total: 3
    notes: |
      Port all type definitions, interfaces, and constants from remember-mcp.

  - id: M2
    name: Database & Configuration
    status: completed
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 1
    tasks_completed: 4
    tasks_total: 4
    notes: |
      Port Weaviate/Firestore init, schema, config, and utilities.

  - id: M3
    name: Core Services
    status: completed
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 2
    tasks_completed: 4
    tasks_total: 4
    notes: |
      Extract business logic from 20 MCP tool handlers into reusable services.

  - id: M4
    name: Integration & Packaging
    status: completed
    progress: 100
    started: 2026-02-27
    completed: 2026-02-27
    estimated_weeks: 1
    tasks_completed: 4
    tasks_total: 4
    notes: |
      NPM packaging, public API design, integration tests, migration guides.

  - id: M5
    name: Trust & Ghost System
    status: completed
    progress: 100
    started: 2026-02-28
    completed: 2026-02-28
    estimated_weeks: 1
    tasks_completed: 6
    tasks_total: 6
    notes: |
      Extract trust enforcement, access control, and ghost/persona system from
      remember-mcp (v3.9.0-v3.13.0). New types, 6 services, schema updates, tests.

  - id: M6
    name: Ghost/Trust Integration into MemoryService
    status: completed
    progress: 100
    estimated_weeks: 0.5
    tasks_completed: 4
    tasks_total: 4
    started: 2026-02-28
    completed: 2026-02-28
    notes: |
      ✅ Ghost/trust filtering wired into MemoryService search/query/findSimilar.
      ✅ GhostSearchContext type, ghost_context parameter on 3 input types.
      ✅ 11 new unit tests, 281 total (12 suites).
      ✅ Migration guide updated with ghost search examples.
      Unblocks remember-mcp migration of 3 deferred ghost tools.
      See: agent/milestones/milestone-6-ghost-memory-service-integration.md

  - id: M7
    name: Web Client SDK
    status: in_progress
    progress: 10
    estimated_weeks: 1.5
    tasks_completed: 3
    tasks_total: 10
    started: 2026-02-28
    completed: null
    notes: |
      @prmichaelsen/remember-core/web subpath export.
      Use-case-oriented server-side SDK for web apps.
      31 functions across 6 modules (memories, relationships, spaces, ghost, profiles, preferences).
      Auto-confirmed space operations, searchAsGhost compound, profile compounds.
      Server-side only (browser guard). Framework-agnostic.
      See: agent/milestones/milestone-7-web-client-sdk.md

tasks:
  milestone_1:
    - id: task-1
      name: Port Core Memory Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-1-core-memory-types.md
      estimated_hours: 3
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        Memory, Relationship, MemoryContext, SearchFilters, SearchOptions, SearchResult, Auth types (GroupPermissions, AuthContext, CredentialsProvider)
    - id: task-2
      name: Port Preferences and Space Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-2-preferences-space-types.md
      estimated_hours: 2
      actual_hours: 0.05
      completed_date: 2026-02-27
      notes: |
        6 preference categories, SpaceMemory, published memory types
    - id: task-3
      name: Port Constants and LLM Types
      status: completed
      file: agent/tasks/milestone-1-types-and-models/task-3-constants-llm-types.md
      estimated_hours: 2
      actual_hours: 0.05
      completed_date: 2026-02-27
      notes: |
        41 content types, LLM types, shared enums

  milestone_2:
    - id: task-4
      name: Port Weaviate Client and Schema
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-4-weaviate-client-schema.md
      estimated_hours: 4
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        client.ts, schema.ts, space-schema.ts, v2-collections.ts, index.ts barrel exports.
        Design: WeaviateConfig param instead of importing from config module (not yet ported).
    - id: task-5
      name: Port Firestore Initialization and Paths
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-5-firestore-initialization.md
      estimated_hours: 2
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        init.ts (FirestoreConfig param pattern, re-exports SDK helpers), paths.ts (env-based prefixes),
        index.ts barrel. Design: FirestoreConfig + FirestoreLogger params, same pattern as WeaviateConfig.
    - id: task-6
      name: Port Configuration Management
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-6-configuration-management.md
      estimated_hours: 2
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        environment.ts (loadRememberConfig, validateRememberConfig), debug.ts (DebugLevel enum, parseDebugLevel, createDebugConfig),
        index.ts updated. Scaffold schema.ts/loader.ts commented out (needs zod).
    - id: task-7
      name: Port Utility Modules
      status: completed
      file: agent/tasks/milestone-2-database-and-config/task-7-utility-modules.md
      estimated_hours: 3
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        logger.ts (createLogger factory), error-handler.ts (formatDetailedError, handleToolError, withErrorHandling),
        filters.ts (Weaviate v3 filter builders), auth-helpers.ts (canModerate, canModerateAny),
        debug.ts (DebugLogger class), test-data-generator.ts (moved to testing/).

  milestone_3:
    - id: task-8
      name: Port Collection Utilities and Existing Services
      status: completed
      file: agent/tasks/milestone-3-core-services/task-8-collection-utils-existing-services.md
      estimated_hours: 5
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        Collections: composite-ids.ts, tracking-arrays.ts, dot-notation.ts, index.ts.
        Services: preferences.service.ts, confirmation-token.service.ts, credentials-provider.ts, space-config.service.ts.
        All use DI pattern (accept Logger param). Updated services/index.ts barrel.
    - id: task-9
      name: Create MemoryService
      status: completed
      file: agent/tasks/milestone-3-core-services/task-9-memory-service.md
      estimated_hours: 8
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        MemoryService class: create(), search() (hybrid), findSimilar() (vector),
        query() (semantic/nearText), update() (partial, replace), delete() (soft).
        All 6 operations extracted from MCP tool handlers. No MCP-specific code.
    - id: task-10
      name: Create RelationshipService and SpaceService
      status: completed
      file: agent/tasks/milestone-3-core-services/task-10-relationship-space-services.md
      estimated_hours: 8
      actual_hours: 0.1
      completed_date: 2026-02-27
      notes: |
        RelationshipService: 4 CRUD+search operations (create, update, search, delete).
        SpaceService: 8 operations (publish, retract, revise, confirm, deny, moderate, search, query).
        Two-phase confirmation flow, composite IDs, tracking arrays, moderation, revision history.
    - id: task-11
      name: Service Tests and Validation
      status: completed
      file: agent/tasks/milestone-3-core-services/task-11-service-tests.md
      estimated_hours: 6
      actual_hours: 0.5
      completed_date: 2026-02-27
      notes: |
        120 tests across 6 suites: collection utils (composite-ids, tracking-arrays, dot-notation),
        MemoryService, RelationshipService, SpaceService. Weaviate mock with filter support.
        Jest CJS config, npm test script. M3 complete.

  milestone_4:
    - id: task-12
      name: NPM Package Setup
      status: completed
      file: agent/tasks/milestone-4-integration-and-packaging/task-12-npm-package-setup.md
      estimated_hours: 4
      actual_hours: 0.2
      completed_date: 2026-02-27
      notes: |
        Created src/index.ts root barrel. Fixed export name collisions (DeletedFilter, ErrorContext).
        Updated tsconfig: module/moduleResolution to Node16. Added typesVersions for backwards compat.
        npm pack: 198 files, 100.5 kB. Verified install with both moduleResolution: node and node16.
    - id: task-13
      name: Public API Design and Barrel Exports
      status: completed
      file: agent/tasks/milestone-4-integration-and-packaging/task-13-public-api-exports.md
      estimated_hours: 3
      actual_hours: 0.05
      completed_date: 2026-02-27
      notes: |
        Completed as part of Task 12. Root barrel excludes database internals.
        11 subpath exports configured. No circular dependencies. typesVersions fallback in place.
    - id: task-14
      name: Integration Tests
      status: completed
      file: agent/tasks/milestone-4-integration-and-packaging/task-14-integration-tests.md
      estimated_hours: 5
      actual_hours: 0.3
      completed_date: 2026-02-27
      notes: |
        22 integration tests across 3 suites: memory lifecycle (7), memory+relationship cross-service (8),
        space publishing flow (9). Mock ConfirmationTokenService for Firestore-free testing.
        Separate jest.e2e.config.js with 30s timeout. npm test:e2e script added.
    - id: task-15
      name: Migration Guide and Consumer Documentation
      status: completed
      file: agent/tasks/milestone-4-integration-and-packaging/task-15-migration-guide.md
      estimated_hours: 4
      actual_hours: 0.15
      completed_date: 2026-02-27
      notes: |
        README.md rewritten with installation, quick start, subpath imports, architecture.
        docs/migration-guide.md with before/after examples, 20-tool mapping table,
        import mapping, step-by-step checklist.

  milestone_5:
    - id: task-16
      name: Port Ghost Config and Access Result Types
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-16-ghost-config-access-result-types.md
      estimated_hours: 2
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        Created ghost-config.types.ts (TrustEnforcementMode, GhostConfig, DEFAULT_GHOST_CONFIG).
        Created access-result.types.ts (6 AccessResult variants, discriminated union).
        Updated auth.types.ts with GhostModeContext on AuthContext.
        Updated types/index.ts barrel with all new exports.
    - id: task-17
      name: Port Trust Enforcement and Trust Validator Services
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-17-trust-enforcement-validator-services.md
      estimated_hours: 3
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        Created trust-enforcement.service.ts (TRUST_THRESHOLDS, buildTrustFilter, formatMemoryForPrompt,
        getTrustLevelLabel, getTrustInstructions, redactSensitiveFields, isTrustSufficient, resolveEnforcementMode).
        Created trust-validator.service.ts (validateTrustAssignment, suggestTrustLevel).
        Updated services/index.ts barrel with all new exports.
    - id: task-18
      name: Port Access Control, Ghost Config, and Escalation Services
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-18-access-control-ghost-escalation-services.md
      estimated_hours: 4
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        Created access-control.service.ts (checkMemoryAccess, handleInsufficientTrust, isMemoryBlocked,
        resetBlock, resolveAccessorTrustLevel, formatAccessResultMessage, canRevise, canOverwrite,
        PublishedMemoryACL type, StubGhostConfigProvider, InMemoryEscalationStore).
        Created ghost-config.service.ts (getGhostConfig, setGhostConfigFields, setUserTrust,
        removeUserTrust, blockUser, unblockUser, isGhostEnabled, validateGhostConfigUpdate,
        FirestoreGhostConfigProvider).
        Created escalation.service.ts (FirestoreEscalationStore — Firestore-backed escalation tracking).
        Created ghost-config-handler.service.ts (handleGetConfig, handleUpdateConfig, handleSetTrust,
        handleRemoveTrust, handleBlockUser, handleUnblockUser — orchestration layer).
        Updated services/index.ts barrel with 28 new exports. Build passes, 120 tests pass.
    - id: task-19
      name: Update Schema, Content Types, and AuthContext
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-19-schema-content-types-auth-updates.md
      estimated_hours: 2
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        Steps 1-3 already complete from prior tasks (ACL/moderation fields in v2-collections.ts,
        ghost/comment content types, can_moderate on GroupPermissions).
        Added 7 ACL/moderation fields to Memory type in memory.types.ts.
        Added buildModerationStatusFilter to utils/filters.ts (default: approved|null, moderator override).
        Exported ModerationStatus type and buildModerationStatusFilter from utils/index.ts.
        Build passes, 120 tests pass.
    - id: task-20
      name: Unit Tests for Trust & Ghost System
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-20-trust-ghost-unit-tests.md
      estimated_hours: 4
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        150 new tests across 6 suites (270 total, 12 suites):
        - trust-enforcement.service.spec.ts: TRUST_THRESHOLDS, buildTrustFilter, formatMemoryForPrompt (5 tiers),
          getTrustLevelLabel, getTrustInstructions, redactSensitiveFields, isTrustSufficient, resolveEnforcementMode
        - trust-validator.service.spec.ts: validateTrustAssignment (valid/invalid/warning), suggestTrustLevel
          (tags override, content type, case insensitive)
        - access-control.service.spec.ts: checkMemoryAccess (6 resolution paths), handleInsufficientTrust,
          resolveAccessorTrustLevel, formatAccessResultMessage, canRevise/canOverwrite (all 3 write modes),
          InMemoryEscalationStore
        - ghost-config.service.spec.ts: validateGhostConfigUpdate, StubGhostConfigProvider, DEFAULT_GHOST_CONFIG,
          GhostConfigHandler validation (self-trust/self-block rejection)
        - escalation.service.spec.ts: attempt tracking, escalation flow, isMemoryBlocked, resetBlock,
          trust floor at 0, block management
        - access-result.types.spec.ts: discriminated union narrowing, switch exhaustiveness,
          AccessResultStatus, access levels
    - id: task-21
      name: Update Migration Guide
      status: completed
      file: agent/tasks/milestone-5-trust-and-ghost-system/task-21-update-migration-guide.md
      estimated_hours: 1.5
      actual_hours: null
      completed_date: 2026-02-28
      notes: |
        Updated docs/migration-guide.md: trust & ghost system section with import examples,
        trust enforcement quick start, access control pattern, ghost config setup,
        schema migration table, permission resolution, tool mapping, content type additions.
        Updated CHANGELOG.md: comprehensive 0.13.0 entry covering all M5 changes.
        Updated README.md: trust & ghost services section, test count (270), content type count (43).

  milestone_6:
    - id: task-22
      name: Extend MemoryService Input Types with Ghost Context
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-6-ghost-memory-service-integration/task-22-extend-memory-service-inputs.md
      estimated_hours: 2
      dependencies: [task-21]
      notes: |
        ✅ Created GhostSearchContext type in search.types.ts.
        ✅ Added ghost_context to SearchMemoryInput, QueryMemoryInput, FindSimilarInput.
        ✅ Exported from types/index.ts barrel.

    - id: task-23
      name: Wire Ghost Filtering into MemoryService Methods
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-6-ghost-memory-service-integration/task-23-wire-ghost-filtering-into-memory-service.md
      estimated_hours: 3
      dependencies: [task-22]
      notes: |
        ✅ search() applies buildTrustFilter + ghost exclusion when ghost_context present.
        ✅ query() applies buildTrustFilter + ghost exclusion when ghost_context present.
        ✅ findSimilar() applies trust + ghost exclusion when ghost_context present.
        ✅ Default behavior unchanged without ghost_context.

    - id: task-24
      name: Unit Tests for Ghost-Integrated MemoryService
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-6-ghost-memory-service-integration/task-24-ghost-memory-service-tests.md
      estimated_hours: 3
      dependencies: [task-23]
      notes: |
        ✅ 11 new ghost-integrated tests (search: 5, query: 3, findSimilar: 3).
        ✅ 281 total tests, 12 suites, 0 failures.
        ✅ Added lessThanOrEqual alias to mock collection.

    - id: task-25
      name: Update Migration Guide and Documentation
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-6-ghost-memory-service-integration/task-25-update-migration-guide.md
      estimated_hours: 1
      dependencies: [task-24]
      notes: |
        ✅ Migration guide: ghost search before/after, GhostSearchContext docs, deferred tool table.
        ✅ CHANGELOG: v0.14.0 entry.
        ✅ README: test count updated to 281.

  milestone_7:
    - id: task-26
      name: Foundation — Result Type, WebSDKError, Browser Guard
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-7-web-client-sdk/task-26-foundation-result-type-error-browser-guard.md
      estimated_hours: 2
      dependencies: []
      notes: |
        ✅ Created src/web/result.ts — Result<T, E> with { ok, data/error }, ok/err/isOk/mapOk/tryCatch helpers.
        ✅ Created src/web/errors.ts — WebSDKError interface, ErrorKind (re-exported from core), createError + 6 convenience factories.
        ✅ Created src/web/guard.ts — assertServerSide() browser guard.
        ✅ Build passes, dist/web/ outputs .js + .d.ts for all 3 files.
    - id: task-27
      name: WebSDKContext and Factory
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-7-web-client-sdk/task-27-web-sdk-context-and-factory.md
      estimated_hours: 2
      dependencies: [task-26]
      notes: |
        ✅ Created src/web/context.ts — WebSDKContext interface, CreateWebSDKContextOptions, createWebSDKContext() factory.
        ✅ Factory calls assertServerSide(). All service imports typed. Build passes.
    - id: task-28
      name: Memory Use Cases
      status: completed
      completed_date: 2026-02-28
      file: agent/tasks/milestone-7-web-client-sdk/task-28-memory-use-cases.md
      estimated_hours: 3
      dependencies: [task-27]
      notes: |
        ✅ Created src/web/memories.ts — 6 functions wrapping MemoryService with Result<T>.
        ✅ Created src/web/types.ts — PaginatedResult, MemorySearchResult, SimilarMemory, RelevantMemory, etc.
        ✅ Search inputs exclude ghost_context (resolved by searchAsGhost in Task 31). Build passes.
    - id: task-29
      name: Relationship Use Cases
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-29-relationship-use-cases.md
      estimated_hours: 2
      dependencies: [task-27]
      notes: |
        4 functions: createRelationship, searchRelationships, updateRelationship, deleteRelationship.
    - id: task-30
      name: Space Use Cases (Collapsed Confirmations)
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-30-space-use-cases.md
      estimated_hours: 3
      dependencies: [task-27]
      notes: |
        7 functions. publish/retract/revise auto-confirm (collapse 2-phase flow). moderate, search, query.
    - id: task-31
      name: Ghost/Trust Use Cases + searchAsGhost
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-31-ghost-trust-use-cases.md
      estimated_hours: 3
      dependencies: [task-27]
      notes: |
        8 functions. Ghost config, trust management, checkAccess, searchAsGhost compound operation.
    - id: task-32
      name: Profile Compound Use Cases
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-32-profile-compound-use-cases.md
      estimated_hours: 3
      dependencies: [task-28, task-30]
      notes: |
        4 functions. createAndPublishProfile, searchProfiles, retractProfile, updateAndRepublishProfile.
    - id: task-33
      name: Preferences Use Cases + Barrel Exports + Subpath Config
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-33-preferences-barrel-subpath.md
      estimated_hours: 2
      dependencies: [task-27]
      notes: |
        2 preference functions, src/web/index.ts barrel, package.json exports["./web"] subpath.
    - id: task-34
      name: Unit Tests
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-34-unit-tests.md
      estimated_hours: 4
      dependencies: [task-28, task-29, task-30, task-31, task-32, task-33]
      notes: |
        40-60 tests across 5-7 suites. Mock WebSDKContext. Test ok/err paths, auto-confirm, searchAsGhost, profiles.
    - id: task-35
      name: Update Docs (Migration Guide, CHANGELOG, README)
      status: pending
      file: agent/tasks/milestone-7-web-client-sdk/task-35-update-docs.md
      estimated_hours: 2
      dependencies: [task-34]
      notes: |
        Migration guide web SDK section, CHANGELOG 0.15.0, README /web subpath, version bump.

documentation:
  design_documents: 6
  milestone_documents: 7
  pattern_documents: 25
  task_documents: 35

progress:
  planning: 100
  implementation: 74
  overall: 77

recent_work:
  - date: 2026-02-28
    description: |
      M6 Ghost/Trust Integration into MemoryService — COMPLETE (4 tasks)
    items:
      - "Created GhostSearchContext type, added ghost_context to SearchMemoryInput/QueryMemoryInput/FindSimilarInput"
      - "Wired buildTrustFilter + ghost exclusion into MemoryService search/query/findSimilar"
      - "11 new unit tests (281 total, 12 suites, 0 failures)"
      - "Updated migration guide with ghost search before/after, CHANGELOG v0.14.0, README test count"
      - "Added lessThanOrEqual alias to mock collection (matches Weaviate v3 API)"
      - "Unblocks remember-mcp migration of 3 deferred ghost tools"
  - date: 2026-02-28
    description: |
      Task 21 — Update Migration Guide (M5 COMPLETE)
    items:
      - "Updated docs/migration-guide.md — trust & ghost system section with import examples, patterns, schema table"
      - "Updated CHANGELOG.md — comprehensive 0.13.0 entry covering all M5 changes"
      - "Updated README.md — trust & ghost services, 270 test count, 43 content types"
      - "M5 Trust & Ghost System complete (6/6 tasks)"
      - "All 5 milestones complete, 21 tasks done"
      - "270 unit tests + 22 integration tests = 292 total, 12 suites, 0 failures"
  - date: 2026-02-28
    description: |
      Task 20 — Unit Tests for Trust & Ghost System
    items:
      - "Created trust-enforcement.service.spec.ts — TRUST_THRESHOLDS, buildTrustFilter, formatMemoryForPrompt (5 tiers), redactSensitiveFields, isTrustSufficient, resolveEnforcementMode"
      - "Created trust-validator.service.spec.ts — validateTrustAssignment, suggestTrustLevel with tag overrides"
      - "Created access-control.service.spec.ts — checkMemoryAccess (6 paths), handleInsufficientTrust, canRevise/canOverwrite, InMemoryEscalationStore"
      - "Created ghost-config.service.spec.ts — validateGhostConfigUpdate, StubGhostConfigProvider, DEFAULT_GHOST_CONFIG, GhostConfigHandler validation"
      - "Created escalation.service.spec.ts — attempt tracking, escalation flow, isMemoryBlocked, resetBlock, trust floor"
      - "Created access-result.types.spec.ts — discriminated union narrowing, switch exhaustiveness"
      - "150 new tests, 270 total across 12 suites, 0 failures"
  - date: 2026-02-28
    description: |
      Task 19 — Update Schema, Content Types, and AuthContext
    items:
      - "Added 7 ACL/moderation fields to Memory type (write_mode, overwrite_allowed_ids, last_revised_by, owner_id, moderation_status, moderated_by, moderated_at)"
      - "Added buildModerationStatusFilter to utils/filters.ts — default approved|null, moderator override, 'all' mode"
      - "Exported ModerationStatus type and buildModerationStatusFilter from utils/index.ts"
      - "Steps 1-3 already complete from prior work (v2-collections.ts, content-types.ts, auth.types.ts)"
      - "Build passes, 120 tests pass"
  - date: 2026-02-28
    description: |
      Task 18 — Port Access Control, Ghost Config, and Escalation Services
    items:
      - "Created access-control.service.ts — checkMemoryAccess (6-step flow), escalation handling, trust resolution, formatAccessResultMessage"
      - "Added canRevise/canOverwrite permission utilities with PublishedMemoryACL type (3 write modes: owner_only, group_editors, anyone)"
      - "Created ghost-config.service.ts — Firestore CRUD for GhostConfig, FirestoreGhostConfigProvider"
      - "Created escalation.service.ts — FirestoreEscalationStore (block/attempt tracking)"
      - "Created ghost-config-handler.service.ts — orchestration layer (get/update config, set/remove trust, block/unblock)"
      - "Updated services/index.ts barrel with 28 new exports"
      - "Build passes, 120 tests pass, all exports verified at runtime"
  - date: 2026-02-28
    description: |
      M5 Planning — Trust & Ghost System milestone, design docs, task documents
    items:
      - "Created milestone doc: agent/milestones/milestone-5-trust-and-ghost-system.md"
      - "Created 6 task documents (Tasks 16-21) in agent/tasks/milestone-5-trust-and-ghost-system/"
      - "Created 4 design documents: trust-enforcement.md, access-control-result.md, ghost-persona-system.md, memory-acl-schema.md"
      - "Researched remember-mcp v3.9.0-v3.13.0 changes (6 new services, 3 new type files)"
      - "Confirmed mcp-auth is separate transport layer, not needed in remember-core"
      - "Updated progress.yaml with M5 milestone and tasks"
  - date: 2026-02-28
    description: |
      Post-completion cleanup — ESM import fixes, scaffold removal, build verification
    items:
      - "Fixed extensionless imports across 11 files (.js extensions for ESM resolution)"
      - "Removed 7 unused core-sdk scaffold files (user.service, base.service, client/, config/schema, config/loader, testing/helpers, testing/fixtures)"
      - "Created .npmignore excluding src/, agent/, config/, tests"
      - "Updated testing/index.ts barrel to export weaviate-mock and test-data-generator"
      - "Clean rebuild: 48 .js + 48 .d.ts files, 100KB tarball"
      - "Verified npm install + all 11 subpath imports resolve correctly"
      - "All 120 unit tests pass after cleanup"
  - date: 2026-02-27
    description: |
      Task 15 — Migration Guide and Documentation (M4 COMPLETE, PROJECT COMPLETE)
    items:
      - "Rewrote README.md — installation, quick start, subpath imports table, architecture diagram"
      - "Created docs/migration-guide.md — before/after examples, 20-tool mapping table, import mapping, checklist"
      - "M4 Integration & Packaging complete (4/4 tasks)"
      - "All 4 milestones complete, 15 tasks done"
      - "142 total tests (120 unit + 22 integration), 9 suites, 0 failures"
  - date: 2026-02-27
    description: |
      Task 13 — Public API verified, Task 14 — Integration Tests
    items:
      - "Task 13 confirmed complete (root barrel, subpath exports, typesVersions already done in T12)"
      - "Created config/jest.e2e.config.js — separate e2e config with 30s timeout, runInBand"
      - "Created memory-lifecycle.e2e.ts — 7 tests (create→search→update→delete, pagination, findSimilar, query, version increment, orphan detection)"
      - "Created memory-relationship.e2e.ts — 8 tests (cross-service: create+link, search with relationships, update, delete+cleanup, full lifecycle)"
      - "Created space-publish.e2e.ts — 9 tests (validation, publish token, deny, confirm+verify, retract validation, group publish, search, query)"
      - "Created in-memory mock ConfirmationTokenService for Firestore-free space testing"
      - "Updated jest.config.js to exclude *.e2e.ts from unit test runs"
      - "Added npm test:e2e script to package.json"
      - "142 total tests (120 unit + 22 integration), 9 suites, 0 failures"
  - date: 2026-02-27
    description: |
      Task 12 — NPM Package Setup (M4 begins)
    items:
      - "Created src/index.ts — root barrel re-exporting types, constants, config, errors, collections, utils, services"
      - "Fixed DeletedFilter duplicate: removed local definition in utils/filters.ts, imports from types/search.types.ts"
      - "Fixed ErrorContext collision: renamed to ToolErrorContext in utils/index.ts re-export"
      - "Updated tsconfig.json: module → Node16, moduleResolution → node16 (proper for ESM)"
      - "Added typesVersions to package.json for backwards-compatible subpath type resolution"
      - "npm pack: 198 files, 100.5 kB compressed, 496.0 kB unpacked"
      - "Verified install: all 11 subpath exports resolve with both moduleResolution: node and node16"
      - "120 tests still pass, 6 suites, 0 failures"
  - date: 2026-02-27
    description: |
      Task 11 — Service Tests and Validation (M3 COMPLETE)
    items:
      - "Created src/testing/weaviate-mock.ts — in-memory Weaviate collection mock with filter support"
      - "Created src/collections/__tests__/composite-ids.spec.ts — 15 tests (generate, parse, round-trip)"
      - "Created src/collections/__tests__/tracking-arrays.spec.ts — 15 tests (add, remove, dedup, immutability)"
      - "Created src/collections/__tests__/dot-notation.spec.ts — 15 tests (names, parse, type checks)"
      - "Created src/services/__tests__/memory.service.spec.ts — 22 tests (create, search, update, delete, findSimilar, query)"
      - "Created src/services/__tests__/relationship.service.spec.ts — 22 tests (create, update, search, delete)"
      - "Created src/services/__tests__/space.service.spec.ts — 31 tests (publish, retract, revise, confirm, deny, moderate, search, query)"
      - "Configured jest.config.js (rootDir, CJS transform, path ignores)"
      - "Added test/test:coverage scripts to package.json"
      - "Installed jest, ts-jest, @types/jest as dev dependencies"
      - "120 tests pass, 6 suites, 0 failures"
      - "M3 Core Services milestone 100% complete (4/4 tasks)"
  - date: 2026-02-27
    description: |
      Task 10 — Create RelationshipService and SpaceService
    items:
      - "Created src/services/relationship.service.ts — 4 CRUD+search operations"
      - "create(): validate memory IDs, insert relationship doc, bidirectional references"
      - "update(): partial updates (relationship_type, observation, strength, confidence, tags)"
      - "search(): hybrid search filtered to doc_type='relationship' with type/strength/confidence filters"
      - "delete(): remove relationship doc and clean up memory references"
      - "Created src/services/space.service.ts — 8 operations"
      - "publish(): phase 1 confirmation token for multi-space/group publish"
      - "retract(): phase 1 confirmation token for selective retraction"
      - "revise(): phase 1 confirmation token for content sync to published copies"
      - "confirm(): phase 2 executor (publish/retract/revise), composite IDs, tracking arrays"
      - "deny(): cancel pending action via ConfirmationTokenService"
      - "moderate(): approve/reject/remove published memories (requires group permissions)"
      - "search(): multi-source search across spaces+groups with deduplication"
      - "query(): semantic nearText on public spaces collection"
      - "Helper exports: buildModerationFilter, parseRevisionHistory, buildRevisionHistory"
      - "Updated src/services/index.ts barrel exports"
      - "M3 Core Services: 75% (3/4 tasks)"
  - date: 2026-02-27
    description: |
      Task 5 — Port Firestore Initialization and Paths
    items:
      - "Created src/database/firestore/init.ts — Firebase Admin SDK init with FirestoreConfig param pattern"
      - "Created src/database/firestore/paths.ts — env-based collection path helpers (user-scoped, cross-user, global)"
      - "Created src/database/firestore/index.ts — barrel exports"
      - "Installed @prmichaelsen/firebase-admin-sdk-v8 dependency"
      - "Re-exports: getDocument, setDocument, addDocument, updateDocument, deleteDocument, queryDocuments, batchWrite, FieldValue, verifyIdToken"
      - "Zero compilation errors"
  - date: 2026-02-27
    description: |
      Task 6 — Port Configuration Management
    items:
      - "Created src/config/environment.ts — loadRememberConfig(), validateRememberConfig(), typed interfaces"
      - "Created src/config/debug.ts — DebugLevel enum (NONE-TRACE), parseDebugLevel(), createDebugConfig()"
      - "Updated src/config/index.ts — barrel exports for new modules, scaffold commented out (needs zod)"
      - "Zero compilation errors in new files"
  - date: 2026-02-27
    description: |
      Task 7 — Port Utility Modules (M2 COMPLETE)
    items:
      - "Created src/utils/logger.ts — createLogger() factory with LogLevel, structured JSON output"
      - "Created src/utils/error-handler.ts — formatDetailedError, handleToolError, withErrorHandling"
      - "Created src/utils/filters.ts — Weaviate v3 filter builders (combined, memory-only, relationship-only, deleted)"
      - "Created src/utils/auth-helpers.ts — canModerate(), canModerateAny()"
      - "Created src/utils/debug.ts — DebugLogger class with trace/debug/info/warn/error/dump/time"
      - "Created src/testing/test-data-generator.ts — synthetic memory generation, benchmarking utils"
      - "Created src/utils/index.ts — barrel exports"
      - "M2 Database & Configuration milestone 100% complete (4/4 tasks)"
  - date: 2026-02-27
    description: |
      Task 8 — Port Collection Utilities and Existing Services (M3 begins)
    items:
      - "Created src/collections/ — composite-ids.ts, tracking-arrays.ts, dot-notation.ts, index.ts"
      - "Created src/services/preferences.service.ts — PreferencesDatabaseService (Firestore-backed)"
      - "Created src/services/confirmation-token.service.ts — ConfirmationTokenService (5-min expiry)"
      - "Created src/services/credentials-provider.ts — StubCredentialsProvider, factory, singleton"
      - "Created src/services/space-config.service.ts — getSpaceConfig, setSpaceConfig, DEFAULT_SPACE_CONFIG"
      - "Updated src/services/index.ts barrel exports"
      - "M2 marked complete, M3 started at 25%"
  - date: 2026-02-27
    description: |
      Task 9 — Create MemoryService
    items:
      - "Created src/services/memory.service.ts — unified MemoryService with 6 operations"
      - "create(): insert memory with validated content type, scoring, tracking arrays"
      - "search(): hybrid (semantic+keyword) search with alpha, filters, deleted filter"
      - "findSimilar(): vector similarity via nearObject/nearText with distance threshold"
      - "query(): semantic nearText search for RAG retrieval"
      - "update(): partial updates via replace() (Weaviate bug workaround), version increment"
      - "delete(): soft delete (deleted_at/deleted_by/deletion_reason), finds orphaned relationships"
      - "Updated services/index.ts with MemoryService exports"
      - "M3 Core Services: 50% (2/4 tasks)"
  - date: 2026-02-27
    description: |
      @acp.sync - Synchronized documentation with actual remember-mcp codebase.
    items:
      - "Fixed tool count: 22 → 20 (actual tool handlers in src/tools/)"
      - "Fixed content type count: 45+ → 41 (exact count from CONTENT_TYPES array)"
      - "Added missing auth.ts types to Task 1 (GroupPermissions, AuthContext, etc.)"
      - "Added missing credentials-provider.ts and space-config.service.ts to Task 8"
      - "Added missing auth-helpers.ts to Task 7"
      - "Added moderate.ts tool handler to Task 10 SpaceService"
      - "Fixed tool paths: tools/ → src/tools/ in Tasks 9, 10"
      - "Noted LLM types file is empty placeholder in Task 3"
      - "Updated all milestone docs and progress.yaml with corrected numbers"
  - date: 2026-02-27
    description: |
      Complete project planning - milestones, tasks, and progress tracking.
    items:
      - "Created 15 task documents from ACP template across 4 milestones"
      - "Updated progress.yaml with all task entries"
      - "Planning phase complete"
  - date: 2026-02-27
    description: |
      Project initialization, ACP setup, core-sdk package install, milestone planning.
    items:
      - "Initialized remember-core project with ACP"
      - "Installed core-sdk package (v1.22.0) with 25 patterns and source scaffolding"
      - "Updated ACP from v4.2.1 to v4.3.0"
      - "Created 4 milestone documents from template"
      - "Researched remember-mcp codebase for extraction planning"

next_steps:
  - "M7: Implement Web Client SDK (Tasks 26-35)"
  - "Start with Task 26: Foundation (Result type, WebSDKError, browser guard)"
  - Publish v0.14.0 to npm
  - Migrate remaining 3 remember-mcp ghost tools

notes:
  - "Source: remember-mcp v3.8.0-v3.13.0 (prmichaelsen/remember-mcp)"
  - "Consumer: remember-mcp-server (prmichaelsen/remember-mcp-server)"
  - "Future consumer: remember-rest-server"
  - "20 MCP tools map to 5 core services + 2 existing services port directly"

current_blockers: []
